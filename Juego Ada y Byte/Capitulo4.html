<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CapÃ­tulo 4 - La MontaÃ±a de los bucles</title>
    <link rel="stylesheet" href="style4.css">
</head>
<body>
    <div class="container">
        <h1>CapÃ­tulo 4: La MontaÃ±a de los Bucles</h1>
        <p>DespuÃ©s de cruzar el Bosque de los Enigmas, Ada y Byte llegaron al pie de una montaÃ±a cubierta de nieve digital. Brillaba con lÃ­neas de cÃ³digo en movimiento.</p>
        <p><em>â€”Esta es la MontaÃ±a de los Bucles â€”explicÃ³ Byteâ€”. Solo quienes entienden cÃ³mo repetir instrucciones pueden escalarla.</em></p>
        <p>Cada escalÃ³n invisible requerÃ­a una orden precisaâ€¦ Una repeticiÃ³n exacta.</p>

        <p><strong>â€”Necesitamos repetir â€œÂ¡Sube!â€ cinco veces para avanzar â€”dijo Byte con una chispa en los ojosâ€”. Â¿Puedes escribir el cÃ³digo correcto?</strong></p>

        <textarea id="codigoInput" rows="6" cols="50" placeholder="for i in range(5): print('Â¡Sube!')"></textarea>
        <br>
        <button onclick="ejecutarCodigo()">Ejecutar cÃ³digo</button>
        <p id="salida"></p>
        
        <img id="montaÃ±acodigo" src="./Imagenes/Ada y Byte (3).png" alt="MontaÃ±a mÃ¡gica" style="width: 800px; box-shadow: 0 0 20px 10px rgba(223, 100, 212, 0.8);" class="active">
        <br>
        <audio id="soundEscalar" src="climb.mp3" preload="auto"></audio>
        <br>
        <button onclick="window.location.href='capitulo5.html'" style="display:none;" id="btnSiguiente">Ir al CapÃ­tulo 5: El Templo del CÃ³digo Maestro</button>
        
        <p><strong>Â¡Recuerda!</strong> Usa el bucle correcto para escalar la montaÃ±a. Byte te ayudarÃ¡ a encontrar el camino.</p>
        <p><em>Â¡Buena suerte!</em></p>
    </div>

    <!-- Contenedor para las partÃ­culas -->
    <div id="snowContainer"></div>

    <script>
        function ejecutarCodigo() {
            const input = document.getElementById("codigoInput").value;
            const salida = document.getElementById("salida");
            const siguiente = document.getElementById("btnSiguiente");
            const sonido = document.getElementById("soundEscalar");

            // Limpieza bÃ¡sica
            const normalizado = input.trim().replace(/\s+/g, ' ').toLowerCase();

            const correcto = "for i in range(5): print('Â¡sube!')";
            if (normalizado === correcto) {
                salida.innerHTML = '<span class="brillo">Â¡Muy bien! Â¡Has escalado la montaÃ±a! ğŸ§—â€â™€ï¸</span>';
                siguiente.style.display = "inline-block";
                sonido.play();
            } else {
                salida.innerText = "Hmm... ese cÃ³digo no parece correcto. Â¡Vuelve a intentarlo!";
                siguiente.style.display = "none";
            }
        }

        // Generar partÃ­culas de nieve
        function crearNieve() {
            const snowContainer = document.getElementById("snowContainer");
            for (let i = 0; i < 100; i++) {
                const snowflake = document.createElement("div");
                snowflake.classList.add("snowflake");
                snowflake.style.left = Math.random() * 100 + "vw";
                snowflake.style.animationDuration = Math.random() * 3 + 2 + "s";
                snowflake.style.fontSize = Math.random() * 10 + 10 + "px";
                snowflake.innerHTML = "â„";
                snowContainer.appendChild(snowflake);

                // Eliminar copos despuÃ©s de caer
                snowflake.addEventListener("animationend", () => {
                    snowflake.remove();
                });
            }
        }

        setInterval(crearNieve, 500);
    </script>
</body>
</html>